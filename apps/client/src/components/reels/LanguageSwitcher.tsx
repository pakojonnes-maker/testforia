// src/components/reels/LanguageSwitcher.tsx
import React from 'react';
import { IconButton, Menu, MenuItem, Box } from '@mui/material';
import LanguageIcon from '@mui/icons-material/Language';

interface LanguageSwitcherProps {
  language: string;
  onLanguageChange: (language: string) => void;
  color?: string;
}

const LanguageSwitcher: React.FC<LanguageSwitcherProps> = ({ language, onLanguageChange, color = 'inherit' }) => {
  const [anchorEl, setAnchorEl] = React.useState<null | HTMLElement>(null);
  
  const handleClick = (event: React.MouseEvent<HTMLButtonElement>) => {
    setAnchorEl(event.currentTarget);
  };
  
  const handleClose = () => {
    setAnchorEl(null);
  };
  
  const handleLanguageChange = (lang: string) => {
    onLanguageChange(lang);
    handleClose();
  };
  
  // Mapeo de idioma a bandera
  const flags: Record<string, string> = {
    es: 'ğŸ‡ªğŸ‡¸',
    en: 'ğŸ‡¬ğŸ‡§',
    fr: 'ğŸ‡«ğŸ‡·',
    de: 'ğŸ‡©ğŸ‡ª',
    it: 'ğŸ‡®ğŸ‡¹',
  };
  
  return (
    <>
      <IconButton onClick={handleClick} color="inherit" sx={{ color }}>
        <Box component="span" sx={{ mr: 0.5, fontSize: '1.2rem' }}>
          {flags[language] || 'ğŸŒ'}
        </Box>
        <LanguageIcon fontSize="small" />
      </IconButton>
      
      <Menu
        anchorEl={anchorEl}
        open={Boolean(anchorEl)}
        onClose={handleClose}
        anchorOrigin={{
          vertical: 'bottom',
          horizontal: 'right',
        }}
        transformOrigin={{
          vertical: 'top',
          horizontal: 'right',
        }}
      >
        <MenuItem onClick={() => handleLanguageChange('es')}>
          <Box component="span" sx={{ mr: 1 }}>ğŸ‡ªğŸ‡¸</Box> EspaÃ±ol
        </MenuItem>
        <MenuItem onClick={() => handleLanguageChange('en')}>
          <Box component="span" sx={{ mr: 1 }}>ğŸ‡¬ğŸ‡§</Box> English
        </MenuItem>
        <MenuItem onClick={() => handleLanguageChange('fr')}>
          <Box component="span" sx={{ mr: 1 }}>ğŸ‡«ğŸ‡·</Box> FranÃ§ais
        </MenuItem>
        <MenuItem onClick={() => handleLanguageChange('de')}>
          <Box component="span" sx={{ mr: 1 }}>ğŸ‡©ğŸ‡ª</Box> Deutsch
        </MenuItem>
        <MenuItem onClick={() => handleLanguageChange('it')}>
          <Box component="span" sx={{ mr: 1 }}>ğŸ‡®ğŸ‡¹</Box> Italiano
        </MenuItem>
      </Menu>
    </>
  );
};

export default LanguageSwitcher;